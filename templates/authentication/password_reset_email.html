<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperaci√≥n de Contrase√±a</title>
    <style>
        /* Reset b√°sico y estilos generales para el cuerpo del email */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; /* Pila de fuentes similar a Bootstrap */
            line-height: 1.6;
            color: #212529; /* Texto oscuro similar a Bootstrap */
            margin: 0;
            padding: 0;
            background-color: #f4f6f9; /* Fondo claro similar al body de tus otros correos */
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        /* Estilo para la tabla externa que simula el centrado de un body */
        .outer-table {
            background-color: #f4f6f9;
        }

        /* Estilo para la tarjeta principal (similar a .container del login) */
        .main-card {
            max-width: 600px;
            margin: 40px auto; /* Margen superior/inferior para espaciar el email */
            background-color: #ffffff;
            padding: 40px; /* p-5 en Bootstrap */
            border-radius: 0.75rem; /* 12px, similar a border-radius en Bootstrap */
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15); /* Sombra similar a Bootstrap */
            border: 1px solid rgba(0, 0, 0, 0.125); /* Borde de tarjeta Bootstrap */
        }

        /* Encabezado del correo (similar a .header del login) */
        .header-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2.5rem 1.5rem; /* Padding similar a p-5 en Bootstrap */
            text-align: center;
            border-radius: 0.75rem 0.75rem 0 0; /* Solo bordes superiores redondeados */
            margin: -40px -40px 40px -40px; /* Extender hacia los bordes y a√±adir margen inferior */
        }

        .header-section h1 {
            font-size: 1.75rem; /* Tama√±o de h3 en Bootstrap */
            margin-bottom: 0.5rem;
            font-weight: 300;
        }
        
        .header-section .subtitle {
            font-size: 0.875rem; /* Tama√±o de texto m√°s peque√±o */
            opacity: 0.9;
            margin-top: 0;
        }

        /* T√≠tulos de secci√≥n */
        h2 {
            font-size: 1.5rem; /* h4 en Bootstrap */
            color: #212529;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        h3 {
            font-size: 1.25rem; /* h5 en Bootstrap */
            color: #212529;
            font-weight: 500;
            margin-bottom: 0.75rem;
        }

        /* P√°rrafos generales */
        p {
            font-size: 1rem; /* p en Bootstrap */
            margin-bottom: 1rem;
            color: #212529;
        }
        p:last-child {
            margin-bottom: 0;
        }

        /* Estilo para el bot√≥n (similar a btn-primary btn-lg) */
        .button-wrapper {
            padding-bottom: 2rem; /* mb-4 */
        }
        .action-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.75rem 2rem; /* py-3 px-4 */
            text-decoration: none;
            border-radius: 2rem; /* Bordes muy redondeados como el bot√≥n de login */
            font-size: 1.125rem; /* h5 */
            font-weight: 600;
            transition: all 0.3s ease; /* Aunque no funcionar√° en todos los clientes, es buena pr√°ctica */
            box-shadow: 0 0.25rem 0.75rem rgba(102, 126, 234, 0.3); /* Sombra m√°s pronunciada */
        }
        .action-button:hover { /* Hover no suele funcionar en emails, pero se incluye */
            transform: translateY(-2px);
            box-shadow: 0 0.375rem 1.25rem rgba(102, 126, 234, 0.4);
        }

        /* Secciones de informaci√≥n/advertencia (similares a alerts) */
        .info-section {
            background-color: #fff3cd; /* alert-warning */
            border: 1px solid #ffeeba; /* border-warning */
            border-left: 0.25rem solid #ffc107; /* Color de borde para info */
            border-radius: 0.5rem; /* 8px */
            padding: 1rem; /* p-3 */
            margin-bottom: 1.5rem; /* mb-3 */
            font-size: 0.9375rem; /* Peque√±o */
        }

        .info-section h3 {
            color: #664d03; /* Color de texto para alert-warning */
            margin-bottom: 0.5rem; /* mb-2 */
            font-size: 1rem; /* Tama√±o de un p normal */
        }
        .info-section p, .info-section li {
            color: #664d03;
        }
        .info-section strong {
            color: #28a745; /* Success color for "24 hours" */
        }
        .info-section .danger-text {
            color: #dc3545; /* Danger color */
        }

        .details-section {
            font-size: 1rem;
            line-height: 1.8;
            padding-top: 1.25rem; /* py-2 */
            padding-bottom: 1.25rem; /* py-2 */
        }
        .details-section strong {
            color: #343a40; /* Texto m√°s oscuro */
            font-weight: 600;
        }
        .details-section ul {
            margin: 0;
            padding-left: 1.25rem; /* pl-4 */
        }
        .details-section li {
            margin-bottom: 0.5rem; /* mb-2 */
        }
        .details-section li:last-child {
            margin-bottom: 0;
        }


        /* Pie de p√°gina (similar a .footer del login) */
        .footer-section {
            background-color: #343a40; /* bg-dark */
            color: #adb5bd; /* text-light */
            text-align: center;
            padding: 1.5rem; /* p-3 */
            font-size: 0.875rem; /* sm */
            border-radius: 0 0 0.75rem 0.75rem; /* Bordes inferiores redondeados */
            margin: 40px -40px -40px -40px; /* Extender hacia los bordes y a√±adir margen superior */
        }
        .footer-section p {
            margin-bottom: 0.5rem; /* mb-2 */
            color: #adb5bd; /* Asegurar que el texto del footer sea claro */
        }
        .footer-section a {
            color: #667eea; /* Color de enlace primario */
            text-decoration: none;
        }
        .footer-section a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body class="body-reset">
    <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0" class="outer-table">
        <tr>
            <td align="center" valign="top" style="padding: 20px;">
                <table role="presentation" width="600" border="0" cellspacing="0" cellpadding="0" class="main-card">
                    <tr>
                        <td align="center" style="padding-bottom: 30px;">
                            <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td class="header-section" align="center" valign="top">
                                        <div style="font-size: 1.75rem; font-weight: bold; color: white; margin-bottom: 0.5rem;">
                                            üîê Sistema de Gesti√≥n
                                        </div>
                                        <h1 style="font-size: 1.5rem; color: white; margin-top: 0; margin-bottom: 0;">Recuperaci√≥n de Contrase√±a</h1>
                                        <p class="subtitle">Solicitud para restablecer tu contrase√±a</p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="padding: 0 40px 30px 40px;">
                            <p style="margin-top: 0;">Hola <strong style="color: #212529;">{{ user.get_full_name|default:user.username }}</strong>,</p>
                            
                            <p>Hemos recibido una solicitud para restablecer la contrase√±a de tu cuenta en nuestro sistema.</p>
                            
                            <p>Si has sido t√∫ quien ha solicitado este cambio, haz clic en el siguiente bot√≥n para crear una nueva contrase√±a:</p>
                        </td>
                    </tr>
                    
                    <tr>
                        <td align="center" class="button-wrapper">
                            <table role="presentation" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td align="center">
                                        <a href="{{ protocol }}://{{ domain }}{% url 'authentication:password_reset_confirm' uidb64=uid token=token %}" target="_blank" class="action-button">
                                            üîë Restablecer mi Contrase√±a
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="padding: 0 40px 30px 40px;">
                            <div class="info-section">
                                <h3>‚ö†Ô∏è Informaci√≥n de Seguridad</h3>
                                <ul style="margin: 0; padding-left: 20px;">
                                    <li style="margin-bottom: 5px;">Este enlace es v√°lido por <strong style="color: #28a745; font-weight: bold;">24 horas</strong></li>
                                    <li style="margin-bottom: 5px;">Solo puede ser utilizado una vez</li>
                                    <li style="margin-bottom: 5px;">Si no solicitaste este cambio, <strong class="danger-text">ignora este correo</strong></li>
                                    <li style="margin-bottom: 0;">Tu contrase√±a actual seguir√° siendo v√°lida hasta que la cambies</li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td class="details-section" style="padding: 0 40px 30px 40px;">
                            <p style="margin-top: 0; margin-bottom: 10px;"><strong>Detalles de la solicitud:</strong></p>
                            <ul style="margin: 0; padding-left: 20px;">
                                <li style="margin-bottom: 5px;"><strong>Fecha:</strong> {{ timestamp|date:"d/m/Y H:i" }}</li>
                                <li style="margin-bottom: 5px;"><strong>Usuario:</strong> {{ user.username }}</li>
                                <li style="margin-bottom: 0;"><strong>Email:</strong> {{ user.email }}</li>
                            </ul>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="padding: 0 40px 30px 40px;">
                            <div class="info-section">
                                <h3>üõ°Ô∏è ¬øNo fuiste t√∫?</h3>
                                <p style="margin-top: 0;">Si no has solicitado este cambio de contrase√±a, es posible que alguien haya intentado acceder a tu cuenta. En este caso:</p>
                                <ul style="margin: 0; padding-left: 20px;">
                                    <li style="margin-bottom: 5px;">No hagas clic en el enlace</li>
                                    <li style="margin-bottom: 5px;">Considera cambiar tu contrase√±a actual</li>
                                    <li style="margin-bottom: 0;">Contacta con nuestro equipo de soporte</li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="padding: 0 40px 30px 40px;">
                             <div class="info-section" style="background-color: #cfe2ff; border: 1px solid #b6d4fe; border-left-color: #0d6efd;"> {# alert-info #}
                                <h3 style="color: #055160;">üìû ¬øNecesitas ayuda?</h3>
                                <p style="margin-top: 0; margin-bottom: 10px;">Si tienes problemas para restablecer tu contrase√±a o necesitas asistencia, no dudes en contactarnos:</p>
                                <ul style="margin: 0; padding-left: 20px;">
                                    <li style="margin-bottom: 5px;"><strong>Email:</strong> <a href="mailto:soporte@tudominio.com" style="color: #667eea; text-decoration: none;">soporte@tudominio.com</a></li>
                                    <li style="margin-bottom: 5px;"><strong>Tel√©fono:</strong> +1 (555) 123-4567</li>
                                    <li style="margin-bottom: 0;"><strong>Horario:</strong> Lunes a Viernes, 9:00 AM - 6:00 PM</li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td style="padding: 0;">
                            <table role="presentation" width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td class="footer-section" align="center" valign="top">
                                        <p style="margin-top: 0; margin-bottom: 5px;">Este es un mensaje autom√°tico, por favor no respondas a este correo.</p>
                                        <p style="margin-bottom: 5px;">¬© 2024 Sistema de Gesti√≥n. Todos los derechos reservados.</p>
                                        <p style="margin-bottom: 0;">{{ site_name }} - <a href="http://{{ domain }}" style="color: #667eea; text-decoration: none;">{{ domain }}</a></p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>